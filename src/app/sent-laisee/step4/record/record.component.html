<div>
  <div>
    <div *ngIf="!permission" class="font12 color333 mb10">
      <div>無錄音權限，如需使用</div>
      <div>請在<strong class="colorlaisee">"手機設置"</strong>中允許使用權限，並重新進入頁面</div>
    </div>
    <ion-button block color="white" size="middle" expand="block" class="myBtn" *ngIf="!hasRecording"
      [disabled]="!permission" [class.active]="active" (touchstart)="touchstartFn($event)"
      (touchmove)="touchmoveFn($event)" (touchend)="touchendFn($event)">
      <div class="btnFlex">
        <span>{{ !!countTimer && countTimer !== 0 ? countFormat : "" }}</span>
        <span id="btnRecording">{{ text }}</span>
        <ion-icon name="mic-sharp" color="laisee" class="font20"></ion-icon>
      </div>
    </ion-button>
  </div>
  <ion-button block color="white" size="middle" expand="block" class="myBtn" *ngIf="hasRecording">
    <div class="btnFlex">
      <span (click)="del()"><ion-icon name="trash-sharp" color="laisee" class="font20"></ion-icon></span>
      <span class="flex">
        <span class="countFormat">{{ countFormat }}︎ </span>
        <svg xmlns="http://www.w3.org/2000/svg" class="mySvg" [attr.width]="lines.length * 5 + 5">
          <ng-container *ngFor="let line of lines; let i = index">
            <line [attr.x1]="i * 5 + 5" [attr.x2]="i * 5 + 5" [attr.y1]="8 +line / 2" [attr.y2]="8 - line / 2"
              [attr.stroke]="i < progress ? '#bc2254' : 'black'" stroke-width="2" stroke-linecap="round" />
          </ng-container>
        </svg>
      </span>
      <ion-icon *ngIf="!playing" name="play-sharp" color="laisee" (click)="play()" class="font20"></ion-icon>
      <ion-icon *ngIf="playing" name="pause-sharp" color="laisee" (click)="pause()" class="font20"></ion-icon>
    </div>
  </ion-button>

  <audio hidden controls muted preload #audio></audio>
  <ion-toast [isOpen]="count >= maxCount - 5 && !hasRecording" position="middle"
    [message]="maxCount - count + '″后將停止錄音'" [duration]="0" color="success"></ion-toast>
</div>